<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>杂项堆积</title>
    <link type="text/css" rel="stylesheet" href="../box/assets/taolaui/taolaui.css">
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        html,
        body {
            height: 100%;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: rgb(243, 243, 243);
        }

        #app {
            width: 100%;
        }

        .box {
            height: 40px;
        }

        #countView {
            display: none;
        }

        .slide {
            width: 200px;
            height: 200px;
        }
    </style>
</head>

<body>
    <div id="app">
        <div class="flex flex-center padding">
            <div class="section flex flex-middle flex-space-between padding-small">
                <div class="flex flex-middle box padding-micro">
                    <input type="button" value="全屏" onclick="setFullScreen()" />
                </div>
                <div class="flex flex-middle box padding-micro">
                    <a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=10086&site=qq&menu=yes">
                        <img border="0" src="./assets/images/qq.gif" alt="点我聊一聊" title="点我聊一聊" />
                    </a>
                </div>
                <div class="flex flex-middle box padding-micro">
                    <div id="timer"></div>
                </div>
            </div>
        </div>

        <div class="flex flex-center padding">
            <div class="section flex box flex-middle padding-small">
                <div id="countBox" class="flex padding-micro">
                    <label for="count">请输入跳转秒数： </label>
                    <input id="count" type="number" value="5" min="5" max="20" maxlength="2" size="2" />
                    <input type="button" value="Go" id="countBtn" onclick="countController()" />
                    <span id="countHint"></span>
                </div>
                <div id="countView"><span id="countNum"></span>秒以后自动跳转到ataola的github <span id="dot">.</span></div>
            </div>
        </div>

        <div class="flex flex-center padding">
            <div class="section flex flex-middle flex-space-between padding-small">
                <button onclick="startSlide(800)">开始</button>
                <img class="slide" src="./assets/images/slide/1.jpg" alt="">
                <button onclick="stopSlide()">暂停</button>
            </div>
        </div>

        <div class="flex flex-center padding">
            <div class="section flex flex-wrap padding-small">
                <div class="flex flex-full padding-small">
                    <button onclick="generateRandomColor()">生成随机色</button>
                    <button onclick="neonLights()">霓虹灯</button>
                </div>
                <div id="colorContainer" class="flex flex-full flex-wrap padding-small"></div>
            </div>
        </div>
    </div>
</body>
<script>
    // 全屏
    function setFullScreen() {
        var docElm = document.documentElement;
        //W3C
        if (docElm.requestFullscreen) {
            docElm.requestFullscreen();
        }
        //FireFox 
        else if (docElm.mozRequestFullScreen) {
            docElm.mozRequestFullScreen();
        }
        //Chrome等 
        else if (docElm.webkitRequestFullScreen) {
            docElm.webkitRequestFullScreen();
        }
        //IE11
        else if (elem.msRequestFullscreen) {
            elem.msRequestFullscreen();
        }
    }
    //参考： https://zhuanlan.zhihu.com/p/30160684

    // 链接跳转
    function countController() {
        let count = document.getElementById('count');
        let num = Number(count.value);
        if (num >= 5 && num <= 20) {
            let countBox = document.getElementById('countBox');
            let countView = document.getElementById('countView');
            let countNum = document.getElementById('countNum');
            let dot = document.getElementById('dot');
            let dotStr = '.';
            countBox.style.display = 'none';
            countView.style.display = 'block';
            countView.style.fontSize = '24px';
            countNum.textContent = num;
            setTimeout(function () {
                num--;
                if (num > 0) {
                    countNum.textContent = num;
                    if (dotStr.length > 5) {
                        dotStr = '.';
                    } else {
                        dotStr += '.';
                    }
                    dot.textContent = dotStr;
                    setTimeout(arguments.callee, 1000);
                } else {
                    location.href = 'https://github.com/ataola';
                }
            }, 1000);
        } else {
            let countHint = document.getElementById('countHint');
            countHint.textContent = '输入数字不合法！请输入5-20以内的数!';
            countHint.style.color = 'red';
            countHint.style.display = "inline";
            countHint.style.padding = "0 4px"
        }
    }

    let count = document.getElementById('count');
    count.onfocus = function () {
        let countHint = document.getElementById('countHint');
        countHint.textContent = '';
    };

    // 获取时间
    function getTime() {
        const weekdays = ['日', '一', '二', '三', '四', '五', '六'];
        let timer = document.getElementById('timer');
        const d = new Date()
        const year = d.getFullYear();
        const month = '0' + (d.getMonth() + 1);
        const date = '0' + d.getDate();
        const hour = '0' + d.getHours();
        const minute = '0' + d.getMinutes();
        const second = '0' + d.getSeconds();
        const weekday = d.getDay();

        function formatDate(str) {
            return str.slice(-2);
        }
        timer.style.width = '200px';
        timer.style.backgroundColor = '#cceabb';
        timer.style.color = '#f7f7f7';
        timer.style.textAlign = 'center';
        timer.innerText =
            `${year}-${formatDate(month)}-${formatDate(date)} ${formatDate(hour)}:${formatDate(minute)}:${formatDate(second)} 星期${weekdays[weekday]}`;
    }
    window.setInterval(getTime, 1000);

    // 轮播图
    let slide = document.getElementsByClassName('slide')[0];
    let currentIndex = 0;
    let timerId = null;

    function startSlide(millisecond) {
        timerId = setInterval(function () {
            currentIndex++;
            currentIndex = currentIndex % 4;
            slide.src = './assets/images/slide/' + currentIndex + '.jpg';
        }, millisecond);
    }

    function stopSlide() {
        clearInterval(timerId);
    }

    // 生成随机色

    function generateRgb() {
        function generateRadom() {
            return parseInt(Math.random() * 255);
        }
        return `rgb(${generateRadom()}, ${generateRadom()}, ${generateRadom()})`;
    }

    function generateRandomColor() {
        const randomColor = generateRgb();
        const colorBox = document.createElement('div');
        colorBox.style.width = '20px';
        colorBox.style.height = '20px';
        colorBox.style.backgroundColor = randomColor;
        document.getElementById('colorContainer').appendChild(colorBox);
    }

    // 霓虹灯
    function neonLights() {
        const colorContainer = document.getElementById('colorContainer');
        const colors = colorContainer.children;
        if (colors.length > 10) {
            window.setInterval(function () {
                for (const color of colors) {
                    color.style.backgroundColor = generateRgb();
                }
            }, 200);
        } else {
            alert('请先添加10个颜色！');
        }
    }
</script>

</html>